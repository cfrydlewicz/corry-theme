// Below-the-fold Environment Only - No Content Styling

// Anchor Links Accommodate Fixed Header
[id^="a_"] {
  scroll-margin-top: $header_height + 8;
}


// Specific Zones
.pre-footer {

  .site-footer_header {
    font-size: 1.25em;
    line-height: 1.375;
    font-weight: 400;
    margin-bottom: .5em;
  }

  ul {
    list-style: none;
  }

}

.site-footer {
  @include f_smallest;
  background-color: $c_grey40;

  @media #{$mq_md} {
    font-size: 0.75rem;
  }

  .inner-wrapper {
    align-items: stretch;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    @media #{$mq_md} {
      flex-wrap: nowrap;
      padding-left: 0;
      padding-right: 0;
    }
    @media #{$mq_lg} {
      max-width: $bp_max;
    }
  }

  section {
    padding: 4px 0;

    @media #{$mq_md} {
      align-items: center;
      display: flex;
      flex-grow: 1;
      padding-left: $gutter;
      padding-right: $gutter;
    }

    @media #{$mq_xl} {
      padding-left: $gutter_lg;
      padding-right: $gutter_lg;
    }

  }

  ul {
    list-style-type: none;
  }

  .copyright-footer .site-footer-text,
  .back-to-top a {
    white-space: nowrap;
  }

  .follow-container {
    width: 100%;

    @media #{$mq_md} {
      justify-content: flex-end;
      width: auto;
    }

    ul {
      display: flex;
      flex-wrap: wrap; // wrap until icons load
      justify-content: center;

      @media #{$mq_md} {
        justify-content: flex-end;
      }

    }

  }

}


// Listing Pages
.pagination-container {
  color: transparent; // hide dash between links
  display: flex;
  justify-content: space-between;
  margin-bottom: 48px;

  @media #{$mq_lg} {
    max-width: $thumbnail_width;
  }

  a {
    padding: 8px $gutter;

    @media #{$mq_xl} {
      padding-left: $gutter_lg;
      padding-right: $gutter_lg;
    }

    &:last-child {
      margin-left: auto;
    }

    &:first-child:not(:last-child) {
      margin-right: auto;
    }

  }

}


// Widget Article Cards
.srpw-li {
  position: relative;

  &:hover {

    .srpw-title {
      color: $c_hover;
    }

    .srpw-more-link.srpw-more-link {
      @extend .srpw-more-link:hover;
      transform: rotate(2.5deg) scale(1.25);
    }

  }

}

.srpw-img {
  @extend .entry-header;
  overflow: hidden;
  position: relative;

  img {
    height: 60vh;
    left: 50%;
    max-width: none;
    position: relative;
    transform: translateX(-50%);
    width: auto;

    @media #{$mq_md} {
      height: auto;
      width: $thumbnail_width;
    }

  }

}

.srpw-content {
}

.srpw-title {
  display: block;
  font-size: 2em;
  font-weight: 400;
  line-height: 1;
  margin-bottom: 0.125em;

  @media #{$mq_md} {
    font-size: 2.5em;
    font-weight: 400;
  }

}

.srpw-summary.srpw-summary {
  // overrides
  line-height: inherit;
  padding-top: 0;
}
.srpw-summary {
  padding-bottom: 48px;
  position: relative;
  width: 100%;

  p {
    max-width: 60ch;
  }

}

.srpw-more-link.srpw-more-link {
  // overrides
  @include button(big);
  transition: all 0.2s ease-in-out;
}

.srpw-more-link {
  bottom: 0;
  position: absolute;
  right: 5%;

  @media #{$mq_md} {
    right: 2%;
  }

  @media #{$mq_mouse} {

    &::after {
      transition: all 0.2s ease-in-out;
    }

    &:hover::after {
      margin: 0 0 0 0.75em;
    }

  }

}


// Post Footer
.post-footer {
  display: flex;
  flex-direction: column;
  flex-wrap: wrap;
  gap: $gutter*2; // match .listing-page
  justify-content: space-between;
  margin-bottom: 36px;
  margin-top: 48px;
  min-height: 80vh;  // ensure footer is fat (for secondary header scripts)

  @media #{$mq_md} {
    flex-direction: row;
  }

  @media #{$mq_lg} {
    gap: $gutter_lg*2; // match .listing-page
  }

  section {
    flex-grow: 1;
    padding: 24px 16px;
  }

  ul {
    list-style-type: none;
  }

  .share-container a {
    overflow-wrap: break-word;
    word-break: break-word;
    word-wrap: break-word;
  }

  .read-more-container {

    .widget-area {
      margin: 0 auto;
      max-width: $thumbnail_width;

      li {
        list-style-type: none; // fix idiotic markup from plugin
      }

    }

  }

  @media #{$mq_md} {

    .comments-container {
      //order: 1;
      width: 100%;
    }

    .discussion-container {
      //order: 2;
      width: 33%;
    }

    .share-container {
      //order: 3;
      width: 33%;
    }

    .follow-container {
      //order: 4;
      width: 33%;
    }

    .read-more-container {
      //order: 5;
      width: 100%;
    }

  }

}

.post-footer_header {
  font-size: 1.5em; // match h3
  font-weight: 400;
  margin-bottom: 0.5em;

  &::before {
    font-size: 0.625em;
    margin-right: 0.5em;
  }
  @media #{$mq_md} {
    font-size: 1.625em;
    font-weight: 500;
    margin-bottom: 1em;
  }

}

// Post Footer Specifics
body.single {

  .post-footer {

    // Big "read another article" referral
    .read-more-container {
      padding-left: 0;
      padding-right: 0;
      padding-bottom: 0;

      .post-footer_header {
        margin-left: $gutter;
        margin-right: $gutter;
      }

      .widget-area {
        margin: 0 auto;
        max-width: $thumbnail_width;

        li {
          list-style-type: none; // fix idiotic markup from plugin
        }

      }

    }

  }

}

// Comments
@media #{$mq_md} {
  .comments-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;

    .post-footer_header {
      width: 100%;
    }

  }
}

.comment-list {
  list-style-type: none;
  margin-bottom: 36px;

  @media #{$mq_md} {
    flex-grow: 1;
    margin-right: 24px;
    width: 48%;

    & ~ .respond-container {
      margin-right: 0;
      width: 48%;
    }

  }

  ol {
    list-style-type: none;
  }

  li:not(:last-child) {
    margin-bottom: 24px;
  }

  article {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: space-between;
    padding: 12px;

    .reply {
      align-self: center;
      order: 3;
      text-align: right;
      width: 40%;
      a {
        @include button(small);
      }
    }

  }

}

.comment-content {
  margin-bottom: 12px;
  order: 1;
  width: 100%;
  p {
    line-height: 1.375;
    a {
      overflow-wrap: break-word;
      text-decoration: underline;
      word-break: break-word;
      word-wrap: break-word;
    }
  }
}

.comment-meta {
  order: 2;
  width: 60%;
  .comment-author {
    img {
      // background styles for when no avatar found for author
      background-color: $c_dark-base;
      //background-image: url('assets/images/octopus.svg'); // https://websemantics.uk/tools/svg-to-background-image-conversion/
      background-image: url("data:image/svg+xml;charset=utf8,%3Csvg version='1.0' xmlns='https://www.w3.org/2000/svg' width='1706.667' height='1448' viewBox='0 0 1280 1086'%3E%3Cpath style='fill:%23171e21' d='M445.2 28.7c-1.2 1-4 5.1-6.2 9.1-3.9 7-4.5 9.2-12.6 49l-8.6 41.7-11.6 11.8-11.7 11.8L363 168c-48.2 24.4-67.3 36.7-87.8 56.4-14.1 13.7-22.2 24.9-27.2 37.7-2.9 7.3-3.4 10.3-4.2 22.9-1.7 25.5.6 70 4.7 92.6 2.6 14.2 8.2 28.1 16.4 40.4 5.7 8.7 14.6 17.5 26.6 26.4 11.4 8.6 22.5 19.5 22.5 22.3 0 2.5-17.5 19.3-29.2 27.9-14.6 10.8-28.4 19.3-46.6 28.7-41.7 21.6-65 27.9-85.2 23.2-20.4-4.8-43.8-23.7-53.5-43.1-5.5-11.1-7.1-20.3-5.7-32.8 1.2-10.8 4.8-23.9 8.9-32.1 10-19.7 28.5-36.8 46.5-42.8 5.1-1.7 8.9-2.1 19.8-2.1l13.5-.1 4.8 4 4.7 3.9v10.1c0 12.5-1.3 20.6-5 32-3.7 11.3-5.4 22.3-4.6 29.7.9 8.5 4.1 16.8 7.7 20.2 3 2.7 3.6 2.8 9.4 2.3 17.3-1.3 31.4-15.6 38.8-39.2 3.8-12.3 5.1-22.5 5.1-40.5 0-16.1 0-16.7-3.4-26.4-8.9-26.2-30.7-46.5-57.6-53.7-11.2-3.1-31.4-3.1-43.6-.1-17.4 4.3-30.1 10.4-45.5 21.9-34.4 25.8-61.5 75.5-67.4 123.7-1.5 12.3-.7 37.6 1.6 50.6 3.4 19.3 11.2 38.7 21.2 52.9 6.5 9.2 19.6 21.8 29.6 28.5 26.4 17.6 56.5 24.6 99.7 23.3 34.7-1.1 50.1-3.7 64.3-10.8 3.3-1.7 29.7-17.9 58.5-36 47-29.6 57.2-35.3 57.2-32.2 0 .4-1.1 1.8-2.4 3.2-5.4 5.9-23 30-25.6 35.2-4.9 9.6-6.4 17-6.4 31.9 0 34.2 9.9 55.7 47.5 103 20 25.2 29.2 38.1 32.7 45.6 10.3 22.4 7.4 43.1-8.3 59-6.1 6.2-12.5 9.4-18.7 9.4H374v-8.3c0-10.2-1.7-32.8-3.1-42.2-6.2-40.6-26.2-68.2-54.5-75.2-9.3-2.3-31.5-2.2-44.4.2-21.1 3.9-43.4 12.9-61.1 24.6-13.3 8.9-30.8 26.5-39.4 39.7-12 18.4-17.1 33.9-18.2 54.7-1.4 28.2 6.7 48.5 27.6 69.4 26.2 26.1 61.9 41.3 106.1 45.2 13.1 1.1 21.1.7 29.5-1.6 2.8-.7 7.5-1.6 10.5-1.9l5.5-.6 2.3 13.7c3.1 18.2 4.2 20.7 10.9 25 6.8 4.3 8.5 7.8 7.2 14.6-.9 5.3-3.1 8.8-9.4 15.7-7 7.6-12.1 18.6-10.1 21.8 1 1.7 13.7-.7 21.9-4.2 11.2-4.7 14.9-5.6 24.4-5.6h8.2l2.8 3.6c5.3 6.9 36 19.6 59.3 24.5 15.2 3.3 45.3 3.3 58.8.2 31-7.3 62.3-27.4 84.7-54.3 14.1-16.9 23.2-32.8 29.2-50.9 3.8-11.6 5.2-24.3 5.3-50.2.1-30-3.5-47.7-24-117.9-13.3-45.6-17-65.2-17-89.3.1-69.3 24.8-112.2 63-109.5 12.9 1 20.7 6.4 26.1 18.4 6.8 14.9 7.9 24.9 9.5 82.4.5 19.4 1 25.6 3.1 35.5 12.1 58.4 42.4 109.6 82 138.7 8.3 6.1 22 13 32.3 16.3l8.5 2.8 36 .1c29.7.1 39.3-.3 54.5-1.9 14.6-1.6 25.3-2 51-2l32.5.1 9 2.7c14.7 4.6 23.5 10.9 28.2 20.5 2.6 5.2 2.8 6.7 2.8 16.7s-.3 11.6-2.9 17.2c-3.2 7-11.6 15.7-18.4 19.2-9.8 5-22 6.3-32.7 3.6-14.1-3.7-16.2-7.9-13-24.8.8-4.3 1.5-9.7 1.5-12-.1-12.2-10.9-21.1-25.2-20.9-14.1.2-21.1 4.7-24.4 15.7-2.8 9-2.6 27.7.3 37 7.6 24 30.1 43.6 58.9 51.2 8.4 2.1 12.2 2.6 24.4 2.6 17.2.1 23.9-1.3 37.6-7.9 20.2-9.6 36.9-31.1 45.1-57.9 2.6-8.6 2.7-9.9 2.7-30.5 0-19-.3-22.4-2.2-29.5-10.8-39.4-44.5-60.5-108.7-68-55.8-6.5-88.5-14.4-115.6-28.1-22.3-11.2-39.1-29-52.5-55.6-12.4-24.6-17.4-49.8-16-80.3.6-15.8 1.6-20.1 5.2-24.5 3.7-4.4 6.3-3.9 13.6 2.5 26.5 23.3 44.7 37.2 64.8 49.3 24.5 14.7 62.6 34.1 98.3 49.8 9.4 4.1 18 8.5 19.1 9.7 1.5 1.8 1.7 3.4 1.4 8.7-.5 6.9-2.6 11.9-8.3 19.8-6.3 9-8.1 19.5-5 30 1.8 6.1 4.5 8.2 11 9 3.5.3 5.6-.1 9.8-2.2 6.8-3.3 12.3-10.2 21.2-26.4 3.7-6.7 7.8-13.1 9.2-14.2 2.5-1.9 4.1-2 57.9-2 44.5 0 56.6-.3 62.1-1.5 31.8-6.7 60.7-30 75.3-60.7 6.7-14.1 9.1-24.2 9.7-40.3 1-28.3-5.7-53.3-20.1-74.9-16.7-25-40.8-39.8-71.1-43.5-28.8-3.5-53.3 1.2-72.3 13.9-19.4 13-33.8 33.3-45 63.5-4 10.6-11.9 35.4-14.2 44.3-1.8 6.9-6 6.9-13.2.2-2.4-2.3-12.8-10.6-23.3-18.7-24.3-18.7-39.4-31.3-51.4-42.9l-9.6-9.2 4-.7c11-1.9 38.9-9.3 54.5-14.5 39-13 73-30.6 97.5-50.3 13.5-10.9 26.5-25.2 31.3-34.5 8.3-16 8.2-14.3 8.2-92.1 0-65.5.6-81.4 3.1-92.6 1.8-8 7.2-18.6 12.3-24.2 6.5-7.2 12.1-9.8 21.6-9.7 4.2 0 8.5.6 9.8 1.3 2.8 1.5 26.8 23.3 33.6 30.4 13.9 14.7 22.3 30.9 25.5 49 1.8 10 2.4 25.9 1.2 30.3-1.7 6.2-4 8.5-17.4 17.4-6.7 4.5-13.7 9.6-15.4 11.3-4.9 4.6-6.6 10.1-6.1 19.4.6 13.3 4.2 17.3 16 18.1 16.3 1 28.1-3.7 40.3-16.1 12.4-12.7 20.3-29.9 24.1-52.6 6.6-40.6-11.6-95.9-42.4-128.3-23.9-25-50.1-36.1-82.1-34.5-28.3 1.3-46.9 9-63.4 26-21.1 21.7-34.2 51.3-40.6 91.8-2.8 17-4 35.4-4.7 67.9-.3 15.1-1 29.8-1.5 32.7-3 15.6-16.8 30.2-35.9 37.9-14 5.7-31 8.6-50.5 8.7-10.6.1-14.5-.3-20.9-2.1-16.8-4.8-29.2-12.7-33.6-21.2-2.5-4.9-4.4-15.5-3.1-17.7 2-3.8 10.5-10.7 34.1-27.8 28.5-20.6 37.9-28.4 49.6-40.9 20.3-21.5 30.6-44 32.3-70.5 1.6-25.9-2.7-43.4-14.5-59.1-2.7-3.5-13.8-15.5-24.6-26.6-10.8-11-20.2-21.3-20.8-22.8-2.7-7.2 0-21.3 5.9-30.5 5.4-8.4 19.7-21.1 35.9-32 16-10.6 18.4-13.3 18.4-19.8 0-1.9-.6-4.8-1.2-6.4-2.1-5.1-5.8-6.2-21.5-6.7-20.8-.6-34.4 2.4-47.1 10.7-16.2 10.4-28.1 29.1-32.9 51.6-2.4 11.1-2.5 32.8-.2 41.5 2.1 8.1 8.5 21.5 17.1 35.9 13.4 22.6 16.6 31.1 16.6 44.6 0 17.2-5.7 29.3-21 44.5-12.4 12.4-22.7 19.5-41 28.4-26 12.5-51.9 19.3-77.2 20.3-8.1.3-15.4.3-16.2 0-1.2-.5.6-2.8 7.3-9.4 8-7.8 9.2-9.5 10.6-14.7 2.5-8.5 1.8-26.5-1.3-32.2-1.9-3.7-12.5-14.9-20.6-21.6l-2.9-2.4 2.8-5c1.6-2.7 3.9-6.2 5.2-7.7 1.3-1.6 2.3-3.5 2.3-4.2 0-.8.6-1.2 1.4-.9 2.3.9 4.8-2.5 4.1-5.5-.9-3.7-2.2-4.8-4.3-3.5-1 .6-1.8 2.7-2 4.8l-.3 3.6h-17.5c-9.6 0-17.4-.2-17.4-.5s3.8-5.3 8.5-11.2c10.7-13.5 28-37.8 32.8-46.1 21.1-36.4 18.8-78.4-6.4-112.2-20.9-28.1-59.8-47.4-103.4-51.1-53.1-4.5-109.3 25.4-132.1 70.3-13.5 26.6-12.3 60.1 3.3 91.2 5 10 17.7 31.4 25.2 42.6 3 4.4 5.1 8.6 5.1 10.2v2.8l-19.2.2c-23 .4-22.7.2-14.8 11.6 2.7 4.1 5 7.7 5 8.1 0 .5-3.3 3.6-7.3 6.9-8.6 7-14.5 14.4-18.4 22.7-2.6 5.5-2.8 7-2.8 17.5 0 10.4.3 12 2.6 17 2.7 5.6 8.2 11.8 17.8 20.2 3 2.6 5 5.1 4.6 5.7-1.2 2-9.7 5.7-23 10.1l-13 4.4h-32c-33.6.1-47.5-1.1-66-5.4-37.7-8.8-61.1-29.5-69.6-61.5-2.6-10.1-3.7-34.1-2-42.8 2.6-12.2 11.4-25.3 25.3-37.4 6.4-5.6 27.6-20 52.1-35.2 33.2-20.7 54-42.8 61.8-65.4 5.5-16.2 6.1-34.2 2-63.7-7-50.5-5.9-45.1-10-48.9-4.5-4.2-9.1-7.1-11.2-7.1-.9 0-2.6.8-3.7 1.7zM366 549.5c1 1.2 1 2.1.2 4.1-1.4 3-3.7 4-5.7 2.4-1.5-1.3-2.1-6.1-.8-7.3 1.2-1.2 5-.7 6.3.8zm764.7 44c17.5 5.5 30.2 19.1 33.9 36.4 4.4 20.9-.7 36.7-16.4 51.2-7.4 6.8-22 14.5-33.2 17.6-17.4 4.8-56.5 0-63.6-7.8-5.5-6.1 8.3-50.1 22.9-72.7 9-13.8 21.6-24.9 31.1-27.3 4.8-1.2 17.4.1 25.3 2.6zm-657.7-.8c0 1 .7 7.9 1.5 15.3 5.5 49.2 18.6 92.9 48.1 159.6 41.3 93.4 45.2 109.8 37.3 157.2-8.3 50.4-28.1 79-61.4 88.7-7.2 2.2-11.9 2.8-24 3.2-12.9.5-15.1.9-16.5 2.5-1.4 1.7-1.9 1.7-14.5-1.6-30.4-8-36.6-12.3-41-28.9-1.2-4.6-3.6-12.7-5.3-18.2-2.9-9.4-11.3-45.9-12.8-55.3-.5-3.3-.3-4.7 1.2-6.3.9-1.1 11.8-7.2 24.1-13.6 27-14 38.2-21.2 47.6-30.7 16.8-16.9 22.3-34 21.4-65.6-.5-19.7-2.3-27.6-9.6-42.5-6.1-12.7-12-22.2-25.7-41.6-25.9-36.4-30.6-46.9-30.8-67.4-.1-8.9.2-10.6 2.6-15.5 5.8-11.8 22.3-25.1 43.9-35.5 12.6-5.9 13.9-6.3 13.9-3.8zM298.3 783.4c8.9 3.7 17.3 20.2 24.7 49 2.2 8.3 4.7 19.2 5.6 24.3 1.6 8.8 1.6 9.3-.2 12.9-4.5 8.9-12.6 10.8-46.4 10.8-26.6.1-32.9-.8-41.7-6-5.5-3.2-11.7-10.3-13.1-15.2-1.7-5.5-1.5-19.7.3-26.6 2.6-9.9 8.2-19.4 16.5-27.7 12.3-12.4 25.8-19.7 40.1-21.7 9.3-1.4 10.6-1.3 14.2.2z'/%3E%3C/svg%3E");
      background-position: center;
      background-size: contain;
      float: left;
      margin-right: 8px;
    }
    b.fn {
      // author name
    }
    .says {
      display: none;
    }
  }
}

.comment-metadata {
  font-size: 0.75em;
  .edit-link {
    // comment admin
    display: block;
  }
}

a.comment-edit-link {
  color: $c_accent;
  font-size: 0.75em;
  text-transform: uppercase;
}

.respond-container {
  margin: 0 auto;
  max-width: 432px;

  .comment-reply-title {
    font-size: 1.625em;
    margin-bottom: 8px;
    small {
      font-size: 12px;
    }
  }

  .comment-notes {
    font-size: 0.75em;
    font-weight: 300;
    margin-bottom: 0.5em;
  }

  label[for="comment"] {
    display: none;
  }

  .comment-form-comment {
    margin-bottom: 4px;
  }

  .comment-form {

    div[class^="comment-form-"] {
      align-items: center;
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.75em;
    }

    label {
      font-size: 0.875em;
      &:first-child {
        flex-grow: 1;
        margin-right: 0.75em;
        text-align: right;
      }
      &:last-child {
        display: block;
        order: 1;
      }
    }

    input[type="checkbox"] {
      order: 2;
    }

    // checkbox styling hack
    div[class^="comment-form-"] {
      position: relative;
    }

    input[type="checkbox"]:not(:checked),
    input[type="checkbox"]:checked {
      opacity: 0;
      position: absolute;
      left: 0;
      & + label {
        padding-right: 32px;
        position: relative;
        &::before {
          border-color: $c_white;
          border-style: solid;
          border-width: 2px;
          border-radius: $border-radius/2;
          content: '';
          height: 24px;
          position: absolute;
          right: 0;
          top: 2px;
          width: 24px;
        }
        &::after {
          color: $c_accent;
          content: '\ed6f';
          font-family: 'icomoon';
          font-size: 1em;
          line-height: 0;
          position: absolute;
          right: 6px;
          top: 14px;
        }
      }
    }

    input[type="checkbox"]:not(:checked) + label::after {
      opacity: 0;
      transform: scale(0) rotate(45deg);
    }

    input[type="checkbox"]:checked + label::after {
      opacity: 1;
      transform: scale(1) rotate(0deg);
    }

  }

  .form-submit {
    text-align: right;
    input[type="submit"] {
      @include button(big);
      margin-right: 8px;
      margin-top: -16px;
    }
  }

  .comment-form-author ~ .form-submit {
    // When user is not logged in
    margin-top: 24px;
  }

  p[class*="akismet"] {
    display: none;
    //font-size: 0.75em;
  }

}
